{"version":3,"file":"static/js/318.b41b7145.chunk.js","mappings":"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","sources":["components/Pagination/Pagination.styled.jsx","components/Pagination/Pagination.jsx","pages/Drinks.jsx"],"sourcesContent":["import {\n  MdOutlineKeyboardArrowLeft,\n  MdOutlineKeyboardArrowRight,\n} from 'react-icons/md';\nimport { theme } from 'styles';\nimport styled from '@emotion/styled';\n\nexport const PaginWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nexport const PaginationList = styled.ul`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  padding: 10px;\n`;\n\nexport const PaginListItem = styled.li`\n  &:not(:last-child) {\n    margin-right: 10px;\n  }\n`;\nexport const ArrowBtn = styled.button`\n  transition: ${theme.animation('opacity')};\n\n  &:disabled {\n    opacity: 0;\n  }\n`;\nexport const ArrowPrev = styled(MdOutlineKeyboardArrowLeft)`\n  color: ${theme.colors.lightGrayTransparent};\n  width: 28px;\n  height: 35px;\n  transition: ${theme.animation('color')};\n  transition: ${theme.animation('scale')};\n\n  :hover,\n  :focus {\n    color: ${theme.colors.lightGray};\n    scale: 1.5;\n  }\n`;\nexport const ArrowNext = styled(MdOutlineKeyboardArrowRight)`\n  color: ${theme.colors.lightGray};\n  width: 28px;\n  height: 35px;\n  transition: ${theme.animation('color')};\n  transition: ${theme.animation('scale')};\n\n  :hover,\n  :focus {\n    color: ${theme.colors.lightGray};\n    scale: 1.5;\n  }\n`;\n\nexport const BtnItem = styled.button`\n  color: ${theme.colors.transparentLight};\n  border-radius: 50%;\n  width: 27px;\n  height: 27px;\n  margin-bottom: 10px;\n  transition: ${theme.animation('scale')};\n  transition: ${theme.animation('background-color')};\n  transition: ${theme.animation('color')};\n\n  &:focus,\n  :hover {\n    scale: 1.2;\n  }\n\n  &.active {\n    background-color: rgba(64, 112, 205, 0.5);\n    color: ${theme.colors.lightGray};\n  }\n`;\n","import PropTypes from 'prop-types';\nimport {\n  ArrowBtn,\n  ArrowNext,\n  ArrowPrev,\n  BtnItem,\n  PaginListItem,\n  PaginWrapper,\n  PaginationList,\n} from './Pagination.styled';\n\nexport const Pagination = ({\n  paginate,\n  prevPage,\n  nextPage,\n  currentPage,\n  totalPages,\n}) => {\n  const pageNumbers = [];\n  for (let i = 1; i <= totalPages; i++) {\n    pageNumbers.push(i);\n  }\n\n  const visiblePages = [];\n  const maxVisiblePages = 8;\n  const pageRange = 4;\n\n  let startIndex = Math.max(currentPage - pageRange, 1);\n  let endIndex = Math.min(startIndex + maxVisiblePages - 1, totalPages);\n\n  const needEllipsisStart = startIndex > 1;\n  const needEllipsisEnd = endIndex < totalPages;\n\n  if (startIndex > 1) {\n    visiblePages.push(1);\n  }\n\n  if (needEllipsisStart) {\n    visiblePages.push('...');\n  }\n\n  for (let i = startIndex; i <= endIndex; i++) {\n    visiblePages.push(i);\n  }\n\n  if (needEllipsisEnd) {\n    visiblePages.push('...');\n  }\n\n  if (endIndex < totalPages) {\n    visiblePages.push(totalPages);\n  }\n\n  return (\n    <PaginWrapper>\n      {pageNumbers.length > 1 && (\n        <>\n          <ArrowBtn onClick={prevPage} disabled={currentPage === 1}>\n            <ArrowPrev />\n          </ArrowBtn>\n          <PaginationList>\n            {visiblePages.map((page, index) => (\n              <PaginListItem key={index}>\n                {page === '...' ? (\n                  <span>{page}</span>\n                ) : (\n                  <BtnItem\n                    className={page === currentPage ? 'active' : ''}\n                    onClick={() => (page !== '...' ? paginate(page) : null)}\n                  >\n                    {page}\n                  </BtnItem>\n                )}\n              </PaginListItem>\n            ))}\n          </PaginationList>\n          <ArrowBtn onClick={nextPage} disabled={currentPage === totalPages}>\n            <ArrowNext />\n          </ArrowBtn>\n        </>\n      )}\n    </PaginWrapper>\n  );\n};\n\nPagination.propTypes = {\n  paginate: PropTypes.func.isRequired,\n  prevPage: PropTypes.func.isRequired,\n  nextPage: PropTypes.func.isRequired,\n  currentPage: PropTypes.number.isRequired,\n  totalPages: PropTypes.number.isRequired,\n};\n","import { EmptyAndError, Section } from 'components';\nimport { DrinkList, DrinkSearchBar } from 'components';\nimport { Pagination } from 'components/Pagination/Pagination';\nimport { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  fetchCategories,\n  fetchIngredients,\n  selectCategories,\n  selectIngredients,\n} from '../redux';\nimport { useSearchParams } from 'react-router-dom';\nimport { getDrinks } from 'api';\nimport { useForm } from 'react-hook-form';\n\nconst Drinks = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [drinks, setDrinks] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [drinksPerPage, setDrinksPerPage] = useState(\n    calculatePerPage(window.innerWidth)\n  );\n\n  function calculatePerPage(windowWidth) {\n    return windowWidth < 1440 ? 10 : 9;\n  }\n  const { control, handleSubmit, getValues } = useForm({\n    defaultValues: {\n      drink: '',\n      category: '',\n      ingredients: '',\n    },\n  });\n  const categoriesList = useSelector(selectCategories.data);\n  const ingredientsList = useSelector(selectIngredients.data);\n\n  const category = searchParams.get('category') || '';\n  const drink = searchParams.get('drink') || '';\n  const ingredients = searchParams.get('ingredients') || '';\n  const limit = drinksPerPage;\n  const page = currentPage;\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (categoriesList.length === 0) {\n      dispatch(fetchCategories());\n    }\n    if (ingredientsList.length === 0) {\n      dispatch(fetchIngredients());\n    }\n  }, [categoriesList.length, dispatch, ingredientsList.length]);\n\n  useEffect(() => {\n    function handleResize() {\n      setDrinksPerPage(calculatePerPage(window.innerWidth));\n    }\n\n    setDrinksPerPage(calculatePerPage(window.innerWidth));\n    window.addEventListener('resize', handleResize);\n\n    const query = {\n      drink,\n      category,\n      ingredients,\n      limit: drinksPerPage,\n      page: currentPage,\n    };\n\n    getDrinks(query)\n      .then(data => {\n        setDrinks(data.results);\n        setTotalPages(data.totalPages);\n      })\n      .catch(console.log);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [category, currentPage, drink, drinksPerPage, ingredients, searchParams]);\n\n  const updateCatQuery = query => {\n    setSearchParams({\n      drink,\n      category: query,\n      ingredients,\n      limit,\n      page,\n    });\n  };\n\n  const updateIngrQuery = query => {\n    setSearchParams({\n      drink,\n      category,\n      ingredients: query,\n      limit,\n      page,\n    });\n  };\n  const updateDrinkQuery = query => {\n    setSearchParams({\n      drink: query,\n      category,\n      ingredients,\n      limit,\n      page,\n    });\n  };\n  const updatePagination = query => {\n    setSearchParams({\n      drink,\n      category,\n      ingredients,\n      limit,\n      page: query,\n    });\n  };\n\n  const onSubmit = async () => {\n    setCurrentPage(1);\n    updateDrinkQuery(getValues('drink'));\n  };\n\n  const handleCategoryChange = () => {\n    setCurrentPage(1);\n    updateCatQuery(getValues('category.value'));\n  };\n\n  const handleIngredientChange = () => {\n    setCurrentPage(1);\n    updateIngrQuery(getValues('ingredients.value'));\n  };\n\n  const paginate = pageNumber => {\n    setCurrentPage(pageNumber);\n    updatePagination(pageNumber);\n  };\n\n  const nextPage = () => paginate(currentPage + 1);\n  const prevPage = () => paginate(currentPage - 1);\n\n  return (\n    <Section title=\"Drinks\">\n      <DrinkSearchBar\n        onSubmit={handleSubmit(onSubmit)}\n        control={control}\n        categoriesList={categoriesList}\n        ingredientsList={ingredientsList}\n        onChangeCategory={handleCategoryChange}\n        onChangeIngredient={handleIngredientChange}\n        initialCategory={searchParams.get('category')}\n        initialIngredient={searchParams.get('ingredients')}\n      />\n      {drinks.length === 0 ? (\n        <EmptyAndError\n          text={\n            \"Hmm, it seems like we haven't tasted any drinks matching your search criteria just yet. You might want to adjust your query; we've got plenty to show you!\"\n          }\n        />\n      ) : (\n        <>\n          <DrinkList drinks={drinks} />\n          <Pagination\n            paginate={paginate}\n            nextPage={nextPage}\n            prevPage={prevPage}\n            currentPage={currentPage}\n            totalPages={totalPages}\n          />\n        </>\n      )}\n    </Section>\n  );\n};\n\nexport default Drinks;\n"],"names":["PaginWrapper","styled","PaginationList","PaginListItem","ArrowBtn","theme","ArrowPrev","MdOutlineKeyboardArrowLeft","ArrowNext","MdOutlineKeyboardArrowRight","BtnItem","Pagination","paginate","prevPage","nextPage","currentPage","totalPages","pageNumbers","i","push","visiblePages","startIndex","Math","max","endIndex","min","needEllipsisStart","needEllipsisEnd","length","onClick","disabled","map","page","index","className","useSearchParams","searchParams","setSearchParams","useState","drinks","setDrinks","setTotalPages","setCurrentPage","calculatePerPage","window","innerWidth","drinksPerPage","setDrinksPerPage","windowWidth","useForm","defaultValues","drink","category","ingredients","control","handleSubmit","getValues","categoriesList","useSelector","selectCategories","ingredientsList","selectIngredients","get","limit","dispatch","useDispatch","useEffect","fetchCategories","fetchIngredients","handleResize","addEventListener","query","getDrinks","then","data","results","catch","console","log","removeEventListener","onSubmit","pageNumber","title","onChangeCategory","onChangeIngredient","initialCategory","initialIngredient","text"],"sourceRoot":""}